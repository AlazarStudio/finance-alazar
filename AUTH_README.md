# Авторизация

## Учетные данные по умолчанию

При первом запуске сервера создается файл `server/data/auth.json` с учетными данными по умолчанию:

- **Логин**: `admin`
- **Пароль**: `admin`

⚠️ **ВАЖНО**: После первого запуска обязательно измените пароль!

## Изменение пароля

Пароль хранится в файле `server/data/auth.json` в виде хеша. Для изменения пароля:

1. Остановите сервер
2. Откройте файл `server/data/auth.json`
3. Измените значение `passwordHash` на хеш нового пароля

Для генерации хеша можно использовать простую функцию (та же, что используется в сервере):

```javascript
function simpleHash(str) {
  let hash = 0;
  for (let i = 0; i < str.length; i++) {
    const char = str.charCodeAt(i);
    hash = ((hash << 5) - hash) + char;
    hash = hash & hash;
  }
  return hash.toString();
}

// Пример: хеш для пароля "myNewPassword"
console.log(simpleHash("myNewPassword"));
```

Или используйте онлайн-калькулятор хеша строки.

## Как работает авторизация

1. Пользователь вводит логин и пароль на странице входа
2. Сервер проверяет учетные данные и выдает токен
3. Токен сохраняется в `localStorage` браузера
4. Все последующие запросы к API включают токен в заголовке `Authorization: Bearer <token>`
5. Сервер проверяет токен перед обработкой каждого запроса
6. При выходе токен удаляется из `localStorage` и из активных токенов на сервере

## Безопасность

⚠️ **Для продакшена рекомендуется**:

1. Использовать более надежное хеширование паролей (например, `bcrypt`)
2. Использовать JWT токены с истечением срока действия
3. Добавить HTTPS для защиты данных при передаче
4. Реализовать защиту от брутфорса (ограничение попыток входа)
5. Использовать Redis или базу данных для хранения активных токенов вместо памяти

## Файлы авторизации

- `server/data/auth.json` - хранит учетные данные пользователя
- `server/server.js` - содержит логику авторизации и защиты маршрутов
- `src/routes/LoginPage.jsx` - страница входа
- `src/store/AuthContext.jsx` - контекст авторизации для React
